# Next.js

A [[react: React]] [[static-stite-generator : Static Site Generator]]

## Adding Testing With Jest

> See [[gh-actions-vercel.md]]

- [Setup Jest](https://medium.com/frontend-digest/setting-up-testing-library-with-nextjs-a9702cbde32d)
- [If using CSS Modules, mock CSS modules](https://jestjs.io/docs/en/webpack#mocking-css-modules)
- If using fetch add polyfill to setupTests.js
  - `import "cross-fetch/polyfill";`
- Add Github Action:

```yml
name: CI
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install
        run: yarn
      - name: Run tests
        run: yarn test --ci
```

## Window undefined

https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr

```jsx
import dynamic from "next/dynamic";

const DynamicComponentWithNoSSR = dynamic(
	() => import("../components/hello3"),
	{ ssr: false } //Important Part
);

function Home() {
	return (
		<div>
			<Header />
			<DynamicComponentWithNoSSR />
			<p>HOME PAGE is here!</p>
		</div>
	);
}

export default Home;
```

## Next.js With MDX and TypeScript

- https://codeconqueror.com/blog/building-a-blog-with-next-js
- `yarn create next-app --example with-mdx with-mdx-app`
- Modify pageExtensions in withMdx config to include 'ts' and 'tsx'. Do this in next.config.js
  - Without this, adding `/pages/about.js` would work, but no `/pages/about.tsx`

```js
const withMDX = require("@next/mdx")({
	extension: /\.mdx?$/,
});
module.exports = withMDX({
	pageExtensions: ["js", "jsx", "mdx", "tsx", "ts"],
});
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[react]: react "React"
[static-stite-generator ]: static-stite-generator "Statice Site Generator(s)"
[//end]: # "Autogenerated link references"
